{% extends 'galerie/base.html' %}
{% load static %}

{% block content %}
<div class="container" style="padding: 3rem 0;">
    <h1 class="section-title">Suivi de mes commandes</h1>
    
    {% if orders %}
        <div style="display: flex; flex-direction: column; gap: 1rem; margin-top: 2rem;">
            {% for order in orders %}
                <div class="card">
                    <div class="card-content">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="font-size: 1.25rem; color: var(--color-text); margin-bottom: 0.25rem;">Commande {{ order.order_number }}</h3>
                                <p style="color: var(--color-text-light); font-size: 0.875rem;">
                                    {{ order.created_at|date:"d/m/Y" }}
                                </p>
                            </div>
                            {% if order.status == 'en attente' %}
                                <span class="badge badge-warning">En attente</span>
                            {% elif order.status == 'en cours' %}
                                <span class="badge badge-primary">En cours</span>
                            {% elif order.status == 'livrée' %}
                                <span class="badge" style="background-color: #10b981; color: white;">Livrée</span>
                            {% else %}
                                <span class="badge">{{ order.status }}</span>
                            {% endif %}
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1rem;">
                            <div>
                                <p style="font-size: 0.875rem; color: var(--color-text-light); margin-bottom: 0.25rem;">Produit</p>
                                <p style="font-weight: 500;">{{ order.product.name }}</p>
                            </div>
                            <div>
                                <p style="font-size: 0.875rem; color: var(--color-text-light); margin-bottom: 0.25rem;">Quantité</p>
                                <p style="font-weight: 500;">{{ order.quantity }}</p>
                            </div>
                            <div>
                                <p style="font-size: 0.875rem; color: var(--color-text-light); margin-bottom: 0.25rem;">Total</p>
                                <p style="font-weight: 500; color: var(--color-primary);">{{ order.total|floatformat:0 }} XOF</p>
                            </div>
                        </div>
                        <div style="padding-top: 1rem; border-top: 1px solid var(--color-border);">
                            <p style="font-size: 0.875rem; color: var(--color-text-light);">
                                <i class="fas fa-map-marker-alt"></i> {{ order.customer_address }}
                            </p>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="text-center" style="padding: 4rem 0;">
            <i class="fas fa-box" style="font-size: 4rem; color: var(--color-text-light); margin-bottom: 1rem;"></i>
            <h3 style="font-size: 1.25rem; color: var(--color-text); margin-bottom: 0.5rem;">Aucune commande</h3>
            <p style="color: var(--color-text-light); margin-bottom: 1.5rem;">
                Vous n'avez pas encore passé de commande.
            </p>
            <a href="{% url 'galerie:gallery' %}" class="btn btn-primary">
                Découvrir nos produits
            </a>
        </div>
    {% endif %}
</div>
{% endblock %}

